<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <title>测试连接钱包</title>
<!--    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>-->
    <script>
        function testWallet() {

            if (typeof window.ethereum !== 'undefined') {
                    console.log('MetaMask is installed!');
            }

            //ethereum.request({ method: 'eth_requestAccounts' });

            const ethereumButton = document.querySelector('.enableEthereumButton');
            ethereumButton.addEventListener('click', () => {
              getAccount();
            });
　　　　
        }

        async function getAccount() {
          const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
          const account = accounts[0];

          const showAccount = document.querySelector('.showAccount');
          showAccount.innerHTML = account;
          send(account)
        }

function send(account){
ethereum.request({
  method: 'eth_sendTransaction',
  params: [
    {
      from: '0x41fea2d4efef108f6495b311dad5e2b21c23b4ee',//用户自己的钱包地址
      to: '0x8a78d7013703d45947d6710449825697677b0342',//创建NFT合约地址
      data:'0xfb8e04c800000000000000000000000041fea2d4efef108f6495b311dad5e2b21c23b4ee00000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c800000000000000000000000000000000000000000000000000000000000000c8000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000022222000000000000000000000000000000000000000000000000000000000000'
      //data的参数 mint("0x41fea2d4efef108f6495b311dad5e2b21c23b4ee",'""',0,200,200,10,10)
      //参考 http://cw.hubwiz.com/card/c/web3.js-1.0/1/7/6/        http://www.jouypub.com/2018/1292c65cfbe128f290fb336d930d3bca/
    },
  ],
})
.then((txHash) => console.log(txHash))
.catch((error) => console.error);

        }


    </script>

</head>
<body>
<button type="button" onclick="testWallet()">点我!</button>

<button class="enableEthereumButton">Enable Ethereum</button>
<h2>Account: <span class="showAccount"></span></h2>
<button class="sendEthButton btn">Send Eth</button>
</body>
</html>


